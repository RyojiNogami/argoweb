<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ARGO</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="style.css" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
  <script>
    // Auto-redirect mobile users to mobile version
    (function () {
      var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
        || (window.innerWidth <= 768 && 'ontouchstart' in window);
      if (isMobile) {
        window.location.href = 'mobile/' + window.location.search;
      }
    })();
  </script>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VS8CV7FTJ0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-VS8CV7FTJ0');
</script>

<body>
  <!-- Entry Overlay -->
  <div id="cosmos-overlay">
    <div class="cosmos-content">
      <h1 class="cosmos-title">ARGO</h1>
      <button id="enter-btn" class="cosmos-button">ENTER</button>
    </div>
  </div>

  <!-- HUD -->
  <div id="hud">
    <div id="hud-key">KEY: C MAJOR</div>
    <div id="hud-chord">SELECT NODE</div>
  </div>

  <!-- Control Panel -->
  <div id="controls">
    <!-- Key Selection -->
    <div class="ctrl-group">
      <label>KEY</label>
      <select id="key-select">
        <option value="0">C</option>
        <option value="1">Db</option>
        <option value="2">D</option>
        <option value="3">Eb</option>
        <option value="4">E</option>
        <option value="5">F</option>
        <option value="6">Gb</option>
        <option value="7">G</option>
        <option value="8">Ab</option>
        <option value="9">A</option>
        <option value="10">Bb</option>
        <option value="11">B</option>
      </select>
    </div>

    <div class="ctrl-group">
      <label>SCALE</label>
      <select id="scale-select">
        <option value="major">MAJOR</option>
        <option value="minor" disabled style="color:#555">MINOR (coming soon)</option>
      </select>
    </div>

    <!-- Effect Toggles -->
    <div class="ctrl-group">
      <label>EFFECTS</label>
      <div class="toggle-row">
        <input type="checkbox" id="filter-toggle" checked>
        <span>FILTER</span>
      </div>
      <div class="toggle-row">
        <input type="checkbox" id="delay-toggle" checked>
        <span>DELAY</span>
      </div>
      <div class="toggle-row">
        <input type="checkbox" id="reverb-toggle" checked>
        <span>REVERB</span>
      </div>
      <div class="toggle-row">
        <input type="checkbox" id="arp-toggle">
        <span>ARPEGGIO</span>
      </div>
    </div>

    <!-- Filter Controls -->
    <div class="ctrl-group">
      <label>FILTER</label>
      <div class="ctrl-row">
        <span>FREQ</span>
        <input type="range" id="filter-freq" min="0" max="1" step="0.01" value="0.6">
      </div>
      <div class="ctrl-row">
        <span>RES</span>
        <input type="range" id="filter-res" min="0" max="1" step="0.01" value="0.1">
      </div>
    </div>

    <!-- Morph Controls -->
    <div class="ctrl-group">
      <label>MORPH</label>
      <div class="ctrl-row">
        <span>TIME</span>
        <input type="range" id="morph-time" min="50" max="2000" step="10" value="500">
        <span id="morph-time-val">500ms</span>
      </div>
    </div>

    <!-- Delay Controls -->
    <div class="ctrl-group">
      <label>DELAY</label>
      <div class="ctrl-row">
        <span>DEPTH</span>
        <input type="range" id="delay-depth" min="0" max="1" step="0.01" value="0.3">
      </div>
      <div class="ctrl-row">
        <span>TIME</span>
        <input type="range" id="delay-time" min="0" max="1" step="0.01" value="0.25">
      </div>
    </div>

    <!-- Reverb Controls -->
    <div class="ctrl-group">
      <label>REVERB</label>
      <div class="ctrl-row">
        <span>DEPTH</span>
        <input type="range" id="reverb-depth" min="0" max="1" step="0.01" value="0.5">
      </div>
    </div>

    <!-- Arpeggio Controls -->
    <div class="ctrl-group">
      <label>ARPEGGIO</label>
      <div class="ctrl-row">
        <span>SPEED</span>
        <input type="range" id="arp-speed" min="50" max="500" step="10" value="180">
        <span id="arp-bpm">180ms</span>
      </div>
    </div>

    <!-- Orbit Parameters (visible only in orbit mode via CSS) -->
    <div id="orbit-params">
      <div class="ctrl-group">
        <label>⦿ ORBIT PARAMS</label>
        <div class="ctrl-row">
          <span>DENSITY</span>
          <input type="range" id="orbit-density" min="0" max="100" step="1" value="40">
        </div>
        <div class="ctrl-row">
          <span>SCATTER</span>
          <input type="range" id="orbit-scatter" min="0" max="100" step="1" value="35">
        </div>
        <div class="ctrl-row">
          <span>DRIFT</span>
          <input type="range" id="orbit-drift" min="0" max="100" step="1" value="50">
        </div>
        <div class="ctrl-row">
          <span>GHOSTS</span>
          <input type="range" id="orbit-ghosts" min="0" max="100" step="1" value="30">
        </div>
        <div class="ctrl-row">
          <span>WARMTH</span>
          <input type="range" id="orbit-warmth" min="0" max="100" step="1" value="60">
        </div>
        <div class="ctrl-row">
          <span>OCTAVE</span>
          <input type="range" id="orbit-octave" min="0" max="4" step="1" value="2">
          <span id="orbit-octave-val">2</span>
        </div>
      </div>
    </div>

    <!-- ORBIT & SHARE Actions -->
    <div class="ctrl-group ctrl-actions">
      <button id="orbit-toggle" class="action-btn" onclick="toggleOrbit()">ORBIT: OFF</button>
      <button id="share-btn" class="action-btn" onclick="shareState()">SHARE</button>
    </div>

  </div>

  <!-- Copyright (always visible, bottom-right of canvas) -->
  <div id="copyright-overlay">
    <a href="legal.html">© 2025-2026 Ryoji Nogami — ALL RIGHTS RESERVED</a>
  </div>

  <script src="argo-state.js"></script>
  <script src="sketch.js"></script>
</body>

</html>